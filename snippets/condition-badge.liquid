{%- comment -%}
  CONDITION BADGE

  Displays a colored badge showing product condition.

  Input (one of these):
    product - Product object
    sku - Direct SKU string

  Usage:
    {% render 'condition-badge', product: product %}
    {% render 'condition-badge', sku: variant.sku %}
{%- endcomment -%}

{%- liquid
  assign badge_mode = 'unknown'
  assign badge_label = ''
  assign badge_class = ''

  # Check product tags first
  if product != blank
    if product.tags contains 'brand-new'
      assign badge_mode = 'brand-new'
    elsif product.tags contains 'renewed'
      assign badge_mode = 'renewed'
    endif
  endif

  # Fallback to SKU parsing
  if badge_mode == 'unknown'
    if sku != blank
      assign check_sku = sku
    elsif product != blank
      assign check_sku = product.selected_or_first_available_variant.sku
    endif

    if check_sku != blank
      render 'sku-parser', sku: check_sku
      if sku_is_valid
        assign badge_mode = sku_mode
      endif
    endif
  endif

  # Set display properties
  case badge_mode
    when 'brand-new'
      assign badge_label = 'Brand New'
      assign badge_class = 'condition-badge--new'
    when 'renewed'
      assign badge_label = 'Renewed'
      assign badge_class = 'condition-badge--renewed'
  endcase
-%}

{%- if badge_label != blank -%}
  <span class="condition-badge {{ badge_class }}">
    {{- badge_label -}}
  </span>
{%- endif -%}

{%- style -%}
  .condition-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    line-height: 1;
  }
  .condition-badge--new {
    background-color: #dcfce7;
    color: #166534;
  }
  .condition-badge--renewed {
    background-color: #dbeafe;
    color: #1e40af;
  }
{%- endstyle -%}
