<style>
    .shopdev .product-card {
      background: transparent;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
  
    .shopdev .product-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
    }
  
    .shopdev .product-image {
      position: relative;
      overflow: hidden;
      border-radius: 8px 8px 0 0;
      background: #f5f5f5;
    }
  
    .shopdev .product-image img {
      transition: transform 0.3s ease;
    }
  
    .shopdev .product-card:hover .product-image img {
      transform: scale(1.05);
    }
  
    .shopdev .color-swatch {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 2px solid #fff;
      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: transform 0.2s ease;
    }
  
    .shopdev .color-swatch:hover {
      transform: scale(1.15);
    }
  
    .shopdev .product-title {
      font-weight: 600;
      color: #1a1a1a;
      line-height: 1.4;
    }
  
    .shopdev .product-description {
      color: #666;
      line-height: 1.5;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  
    .shopdev .product-price {
      font-weight: 600;
      color: #1a1a1a;
    }
  
    .shopdev .compare-price {
      color: #999;
      text-decoration: line-through;
    }
  
    @media (max-width: 1024px) {
      .shopdev .product-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  
    @media (max-width: 768px) {
      .shopdev .product-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  
    @media (max-width: 480px) {
      .shopdev .product-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
  
  <div class="w-full px-[16px] md:px-[24px]" style="padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;">
    <div style="max-width: 1270px; margin: 0 auto;">
      {% if section.settings.heading != blank %}
        <h2 class="text-heading font-bold text-[20px] leading-[30px] mb-[24px]" style="color: #0A0A0A;">
          {{ section.settings.heading }}
        </h2>
      {% endif %}

      {% if section.settings.collection != blank %}
        {% assign collection = section.settings.collection %}
        {% assign products = collection.products | slice: 0, 6 %}
        
        {% if products.size > 0 %}
          <div class="product-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6">
            {% for product in products %}
              <div class="product-card bg-white">
                <!-- Product Image -->
                <a href="{{ product.url }}" class="product-image block aspect-[3/4]">
                  {%- if product.featured_image != blank -%}
                    {{ product.featured_image | image_url: width: 400 | image_tag: 
                      loading: 'lazy',
                      class: 'w-full h-full object-cover',
                      alt: product.title
                    }}
                  {%- else -%}
                    {{ 'product-1' | placeholder_svg_tag: 'w-full h-full object-cover' }}
                  {%- endif -%}
                </a>
  
                <!-- Product Info -->
                <div class="p-4">
                  <!-- Color Swatches -->
                  {% if product.options_with_values.size > 0 %}
                    {% for option in product.options_with_values %}
                      {% if option.name == 'Color' or option.name == 'Colour' %}
                        <div class="flex gap-2 mb-3">
                          {% for value in option.values limit: 5 %}
                            {% assign color_value = value | downcase | replace: ' ', '-' %}
                            <div class="color-swatch" 
                                 style="background-color: {{ value | handle }};"
                                 title="{{ value }}">
                            </div>
                          {% endfor %}
                        </div>
                      {% endif %}
                    {% endfor %}
                  {% endif %}
  
                  <!-- Product Title -->
                  <a href="{{ product.url }}" class="block mb-2">
                    <h3 class="product-title text-base">{{ product.title }}</h3>
                  </a>
  
                  <!-- Product Description -->
                  {% if product.description != blank %}
                    <p class="product-description text-sm mb-3">
                      {{ product.description | strip_html | truncate: 80 }}
                    </p>
                  {% endif %}
  
                  <!-- Product Price -->
                  <div class="flex items-center gap-2">
                    {% if product.compare_at_price > product.price %}
                      <span class="compare-price text-sm">
                        {{ product.compare_at_price | money }}
                      </span>
                    {% endif %}
                    <span class="product-price text-base">
                      {{ product.price | money }}
                    </span>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <div class="text-center py-12">
            <p class="text-gray-500">No products found in this collection.</p>
          </div>
        {% endif %}
      {% else %}
        <div class="text-center py-12 bg-gray-50 rounded-lg">
          <p class="text-gray-500 mb-2">Please select a collection to display products.</p>
          <p class="text-sm text-gray-400">Use the theme customizer to choose a collection.</p>
        </div>
      {% endif %}
    </div>
  </div>
  
  {% schema %}
  {
    "name": "Product Collection Row",
    "class": "shopdev",
    "tag": "section",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Section Heading",
        "default": "Featured Products"
      },
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Padding Top",
        "default": 24
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Padding Bottom",
        "default": 24
      }
    ],
    "presets": [
      {
        "name": "Product Collection Row",
        "settings": {
          "heading": "Featured Products",
          "collection": "activewear"
        }
      }
    ]
  }
  {% endschema %}